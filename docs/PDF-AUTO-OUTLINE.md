# יצירת תוכן עניינים אוטומטי למסמכי PDF

## תיאור
מכיון שרוב הספרים בספרייה לא כוללים תוכן עניינים (outline) מובנה, הוספנו פונקציונליות שיוצרת אוטומטית תוכן עניינים מבוסס מספרי עמודים.

## איך זה עובד?

### זיהוי אוטומטי
כאשר PDF נטען, המערכת בודקת אם יש לו תוכן עניינים מובנה:
- **אם יש תוכן עניינים** - משתמשים בתוכן העניינים המקורי
- **אם אין תוכן עניינים** - יוצרים אוטומטית תוכן עניינים עם מספרי עמודים

### מבנה תוכן העניינים האוטומטי

התוכן עניינים מאורגן בקבוצות לפי גודל המסמך:

| גודל מסמך | עמודים בקבוצה | דוגמה |
|-----------|---------------|-------|
| עד 50 עמודים | 10 | עמודים 1-10, 11-20, וכו' |
| 51-200 עמודים | 20 | עמודים 1-20, 21-40, וכו' |
| 201-500 עמודים | 50 | עמודים 1-50, 51-100, וכו' |
| מעל 500 עמודים | 100 | עמודים 1-100, 101-200, וכו' |

### מבנה היררכי
כל קבוצה מכילה:
1. **כותרת ראשית** (מודגשת) - "עמודים X-Y"
2. **תתי-פריטים** - כל עמוד בנפרד: "עמוד 1", "עמוד 2", וכו'

## קבצים שהשתנו

### `public/pdfjs/web/viewer.html`
נוסף סקריפט JavaScript בסוף הקובץ שמטפל ביצירת תוכן העניינים האוטומטי.

הסקריפט:
1. מאזין לאירוע `documentloaded`
2. בודק אם יש outline קיים
3. אם אין - יוצר outline סינתטי עם מספרי עמודים
4. מציג את ה-outline בסרגל הצד

## שימוש

אין צורך בפעולה מיוחדת - הפונקציונליות פועלת אוטומטית:

1. פתח PDF כלשהו
2. לחץ על כפתור "תוכן עניינים" (📑) בסרגל הצד
3. אם למסמך אין תוכן עניינים מקורי, תראה רשימה של מספרי עמודים
4. לחץ על מספר עמוד כדי לנווט אליו

## התאמה אישית

ניתן לשנות את הגדרות הקיבוץ בקובץ `viewer.html`:

```javascript
// שנה את מספר העמודים בכל קבוצה
let pagesPerGroup;
if (numPages <= 50) {
  pagesPerGroup = 10; // ← שנה כאן
} else if (numPages <= 200) {
  pagesPerGroup = 20; // ← שנה כאן
}
// וכו'
```

## יתרונות

✅ ניווט קל ומהיר במסמכים ארוכים  
✅ אין צורך ביצירה ידנית של תוכן עניינים  
✅ עובד אוטומטי עם כל PDF  
✅ לא משפיע על מסמכים עם תוכן עניינים קיים  
✅ תמיכה בעברית מלאה  

## דוגמאות

### מסמך קטן (30 עמודים)
```
📑 תוכן עניינים
├─ עמודים 1-10
│  ├─ עמוד 1
│  ├─ עמוד 2
│  └─ ...
├─ עמודים 11-20
└─ עמודים 21-30
```

### מסמך גדול (250 עמודים)
```
📑 תוכן עניינים
├─ עמודים 1-50
│  ├─ עמוד 1
│  ├─ עמוד 2
│  └─ ...
├─ עמודים 51-100
├─ עמודים 101-150
└─ ...
```

## פתרון בעיות

### תוכן העניינים לא מופיע
- ודא שהסרגל הצד פתוח (לחץ על כפתור ☰)
- לחץ על כפתור תוכן העניינים (📑) בראש הסרגל הצד
- בדוק את ה-Console לשגיאות (F12)

### תוכן העניינים מוצג מעל תצלומי הדפים
הבעיה תוקנה! תוכן העניינים כעת מוצג בטאב נפרד מתצלומי הדפים. לחץ על הכפתור המתאים כדי לעבור בין הטאבים.

### הניווט לא עובד
- ודא שה-PDF נטען במלואו
- נסה לרענן את הדף

## תאריך עדכון
4 בפברואר 2026

### עדכונים אחרונים
- **4 בפברואר 2026**: תוקנה בעיה שבה תוכן העניינים לא היה מוצג כשתצלומי הדפים היו פעילים
- **2 בפברואר 2026**: יצירה ראשונית של תוכן עניינים אוטומטי
