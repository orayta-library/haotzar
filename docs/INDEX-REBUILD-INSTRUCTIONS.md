# למה החיפוש מוצא רק 3 ספרים?

## הבעיה

האינדקס הנוכחי שלך מכיל רק **3 ספרים**:
1. חזון איש זרעים
2. חזון איש יורה דעה
3. חזון איש חושן משפט

אבל יש לך **3,975 קבצים** בספרייה!

## הסיבה

האינדקס לא נבנה עבור כל הספרים. צריך לבנות אינדקס חדש.

## הפתרון

יש לך 2 אפשרויות:

### אפשרות 1: אינדקס חלקי (מהיר - לבדיקה)

בנה אינדקס עבור **50 הספרים הראשונים** (5-10 דקות):

```cmd
scripts\build-partial-index.cmd
```

אחרי שזה מסתיים, הרץ:
```cmd
node scripts\upload-to-meili.js
```

### אפשרות 2: אינדקס מלא (איטי - לייצור)

בנה אינדקס עבור **כל 3,975 הספרים** (2-4 שעות):

```cmd
scripts\build-full-index.cmd
```

אחרי שזה מסתיים, הרץ:
```cmd
node scripts\upload-to-meili.js
```

## מה קורה בתהליך?

### שלב 1: בניית האינדקס
הסקריפט:
1. סורק את כל קבצי ה-PDF
2. מחלץ טקסט מכל PDF
3. מחלק לחלקים (chunks)
4. שומר ב-`index/meili-docs.json`

זה השלב האיטי (2-4 שעות למלא).

### שלב 2: העלאה ל-Meilisearch
הסקריפט:
1. טוען את `index/meili-docs.json`
2. מעלה ל-Meilisearch
3. מגדיר את כללי החיפוש

זה מהיר (1-2 דקות).

## איך לבדוק כמה ספרים יש באינדקס?

```cmd
node -e "const fs = require('fs'); const docs = JSON.parse(fs.readFileSync('index/meili-docs.json', 'utf8')); const files = new Set(docs.map(d => d.fileId)); console.log('ספרים באינדקס:', files.size); console.log('רשימה:', Array.from(files));"
```

## המלצה

1. **תחילה:** הרץ את האינדקס החלקי (50 ספרים) כדי לבדוק שהכל עובד
2. **אחר כך:** אם הכל טוב, הרץ את האינדקס המלא (כל הספרים)

## שאלות נפוצות

**ש: למה זה לוקח כל כך הרבה זמן?**  
ת: צריך לעבד 72GB של PDFs, לחלץ טקסט, ולבנות אינדקס. זה תהליך כבד.

**ש: האם אני צריך לעשות את זה כל פעם?**  
ת: לא! רק פעם אחת. אחרי זה האינדקס נשמר ואפשר להשתמש בו.

**ש: מה קורה אם אני מוסיף ספרים חדשים?**  
ת: צריך לבנות את האינדקס מחדש כדי לכלול אותם.

**ש: האם אפשר לבטל באמצע?**  
ת: כן, לחץ Ctrl+C. אבל תצטרך להתחיל מההתחלה בפעם הבאה.

---

**סטטוס נוכחי:** 3 ספרים באינדקס  
**יעד:** 3,975 ספרים  
**פעולה נדרשת:** הרץ `scripts\build-full-index.cmd`
